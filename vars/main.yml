---
# vars file for unbound

# unbound config/executable directories
unbound_config_dir: /usr/local/etc/unbound
unbound_bin_dir: /usr/local/sbin
unbound_lib_dir: /var/lib/unbound
unbound_confd_dir: "{% if 'Redhat' in ansible_os_family %}{{ unbound_config_dir }}/conf.d{% else %}{{ unbound_config_dir }}/unbound.conf.d{% endif %}"

required_dirs:
  - {name: "{{ unbound_confd_dir }}", perms: "0755"}

config_templates:
  - {src: "99-unbound-sysctl.conf.j2", dest: "/etc/sysctl.d/99-unbound-sysctl.conf", mode: "0644"}
  - {src: "99-unbound-limits.conf.j2", dest: "/etc/security/limits.d/99-unbound-limits.conf", mode: "0644"}

_unbound_requirements:
  default:
    - gcc
    - make
    - openssl
    - wget
    - diffutils
    - libexpat1-dev
    - file
    - libssl-dev
    - libsystemd-dev
    - libudev-dev
  Alpine:
    - gcc
    - make
    - openssl
    - wget    
    - diffutils
    - expat-dev
    - file
    - openssl-dev
    - systemd-dev
    - libevent-dev
  Debian:
    - gcc
    - make
    - autoconf
    - openssl
    - wget
    - libsystemd-dev
    - diffutils
    - libexpat1-dev
    - libssl-dev
    - libudev-dev
    - pkg-config
    - libevent-dev
    - procps
  RedHat:
    - gcc
    - make
    - openssl
    - wget    
    - diffutils
    - expat-devel
    - file
    - openssl-devel
    - systemd-devel
    - libevent-devel
    - procps-ng
  Suse:
    - gcc
    - make  
    - openssl
    - wget    
    - diffutils
    - libexpat-devel
    - file
    - openssl-devel
    - systemd-devel
    - libevent-devel

unbound_requirements: "{{ _unbound_requirements[ansible_os_family] | default(_unbound_requirements['default']) }}"

config_sections:
  - { name: "server_section", value: 'server' }
  - { name: "remote_control_section", value: 'remote-control' }
  - { name: "stub_zone_section", value: 'stub-zone' }
  - { name: "forward_zone_section", value: 'forward-zone' }
  - { name: "auth_zone_section", value: 'auth-zone' }
  - { name: "view_section", value: 'view' }
  - { name: "python_section", value: 'python' }
  - { name: "dnscrypt_section", value: 'dnscrypt' }
  - { name: "rpz_section", value: 'rpz' }
